<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
 <link rel="stylesheet" href="http://dev.eclipse.org/default_style.css" type="text/css">
 <title>XSD FAQ</title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
 <body>

<!-- Title -->

<table border="0" cellspacing="0" cellpadding="3" width="100%" style="border-collapse: collapse" bordercolor="#111111">
 <tbody>
  <tr>
   <td align="Left" width="54%">
   <p><font class="indextop"> XSD Developer FAQ</font><br>
       <font class="indexsub"> frequently asked question and answers</font></p>
   </td>
   <td width="46%"><img src="http://dev.eclipse.org/images/howto_banner.jpg" height="111" width="272" align="Center"></td>
  </tr>
 </tbody>
</table>

<!-- Introduction -->

<table border="0" cellspacing="0" cellpadding="2" width="100%" style="border-collapse: collapse" bordercolor="#111111">
   <tbody>
    <tr>
      <td align="Left" valign="Top" colspan="2" bgcolor="#0070A0">
      <b><font face="Arial,Helvetica" color="#FFFFFF">XSD Developer FAQ</font></b></td>
   </tr>
   <tr>
      <td><font size="-1" face="arial,helvetica,geneva">
       Last Modified: March 13</font><sup><font size="-2" face="Arial">th</font></sup><font size="-1" face="arial,helvetica,geneva">, 
      2002</font></td>
   </tr>
   <tr>
    <td>

If you have additional questions that you would like to see answered in future versions of this FAQ
or in the Javadoc, please post them to the <a href="http://www.eclipse.org/newsportal/thread_frameset.php3?name=eclipse.technology.xsd">XSD newsgroup</a>.
<hr>
    </td>
   </tr>

  </tbody>
</table>
 <br>

<!-- Table of contents header -->

<table border="0" cellspacing="0" cellpadding="2" width="100%" bgcolor="#cccccc">
   <tbody>
    <tr>
      <td bgcolor="#777777">
        <font color="#FFFFFF"><b><a name="toc">
          Table of contents:</a></b></font></td>
   </tr>
  </tbody>
</table>

<ul>
  <!-- General subheader -->
  <li><b><a href="#general">General:</a></b>
    <ol>
      <li><a href="#general_about">What is XML Schema Infoset Model?</a></li>
      </ol><BR>
      
  <li><b><a href="#install">Download &amp; Installation:</a></b>
    <ol>
    <li>
    <a href="#install_howto">How do I install XSD Infoset Model?</a></li>
    <li>
    <a href="#install_classpath">What should my Java CLASSPATH include, in order to use the library?
</a></li>
    <li>
    <a href="#install_andUse">What steps should I take to install the source code in one Eclipse project,
and to identify another project with my own code as dependent upon and using this library?</a></li>
    <li>
    <a href="#install_um">Does XSD have a site that I can use with the Eclipse Update Manager?</a></li>

    </ol>
    </li>
    <BR>


  <li> <b> <a href="#capabilities">Capabilities:</a></b>
      <ol>
         <li><a href="#capabilities_outside">Can this library be used outside of 
the Eclipse environment?</a></li>
         <li><a href="#capabilities_versionOfSchema">What version of W3C XML Schema is accepted as input?</a></li>
         <li><a href="#capabilities_validationOfInstance">Does this library allow me to supply an instance document and have it validated
against the schema?</a></li>
         <li><a href="#capabilities_completelyCorrect">Is there a function to inquire "Is this parsed or constructed schema completely correct?"
</a></li>

      </ol>
  </li>
  <BR>
  <li> <b> <a href="#compatibility">Compatibility:</a></b>
      <ol>
        <li><a href="#compatibility_eclipseVersion">What version(s) of Eclipse does this code work on?</a></li>
      </ol>
  </li>
  <BR>
  <li> <b> <a href="#error handling">Error Handling:</a></b>
      <ol>
         <li><a href="#eh_DOMwithBadAttributes">What happens if I pass a DOM which claims to be the XML representation of a Schema, but
there are errors in the attribute values?</a></li>
      </ol>
  </li>
  <BR>
  <li> <b> <a href="#how to learn">How To Learn:</a></b>
      <ol>
         <li><a href="#h2l_sampleMethods">Are there sample Java methods that show how to use the API?</a></li>
      </ol>
  </li>
  <BR>
  <li> <b> <a href="#miscellaneous">Miscellaneous:</a></b>
      <ol>
         <li><a href="#misc_overrideSchemaLocation">Is there a way to have schema documents which
reference other schema documents through &lt;include&gt; &lt;import&gt; or &lt;redefine&gt;
be fetched from locations other than those given in the schemaLocation attribute?</a></li>
         <li><a href="#misc_update">When modification are made to a schema document
which was used by another schema document (which has been loaded by this library),
will my code need to explicitly make the corresponding modifications to the using schema document?</a></li>
         <li><a href="#misc_prefix">How does the model choose what prefix to use in QNAMEs for a namespace URI in serializing the schema,
when more than one prefix has been associated with that namespace?</a></li>
         <li><a href="#misc_equals">Does the o1.equals(o2) method
determine "semantic equivalence" between two schema components?</a></li>
         <li><a href="#misc_addToSecondSchema">What happens if I add a schema component to schema2 that I had 
previously added to schema1?</a></li>
         <li><a href="#misc_getAnnotations">ComplexTypes and SimpleTypes only have at most 1 annotation. Why is there XSDTypeDefinition.getAnnotations() in addition to getAnnotation().  
What is getAnnotations() used for?</a></li>
         <li><a href="#misc_getEffectivePROPERTY">If I used one of the getEffectivePROPERTY() methods with a simpleType of the LIST or UNION type,
would any of the facet information from the itemType (in the case of List) or the memberTypes (in
the case of union) be used to adjust or supplement the values returned (as happens
with a simpleType which is atomic and derived by restriction from another type)?</a></li>
         <li><a href="#misc_getSchemaReturnNull">What can cause some of the resources in a resource set, which correspond
to schema documents referenced by &lt;include&gt; &lt;import&gt; or &lt;redefine&gt;, to return null from
(XSDResourceImpl)resource.getSchema() ?</a></li>
         <li><a href="#misc_anySimpleType">How is a declaration of an attribute or element that specifies <strong>anySimpleType</strong>
processed?</a></li>
         <li><a href="#misc_getElementReturnsNull">When will <strong>getElement()</strong>
return null when used against a component?
</a></li>
 

      </ol>
  </li>
  <BR>
  <li> <b> <a href="#programming tricks">Programming Tricks:</a></b>
      <ol>
         <li><a href="#pt_findByName">To obtain a component of a schema by name, or find out such a component does
not exist in the schema, what sequence of code should be used?</a></li>
         <li><a href="#pt_unbounded">How can the attribute maxOccurs="unbounded" be set on a particle?</a></li>
         <li><a href="#pt_schemaFromResource">When passed an object of type XSDSchema, what method tells me if it was 
parsed from a Resource?</a></li>
         <li><a href="#pt_serializeTarget">When passed an object of type XSDSchema, what method permits me to alter the Resource 
in which it will be serialized?
</a></li>
         <li><a href="#pt_unbounded">How can the attribute maxOccurs="unbounded" be set on a particle?</a></li>
         <li><a href="#pt_nonXSDextension">If I want the library to parse a Schema from a file which does not have the 
extension <strong>.xsd</strong>, 
or serialize a Schema to a file which does not have the extension <strong>.xsd</strong>, 
what do I do?
</a></li>
         <li><a href="#pt_containsUnresolved">Is there a function to inquire "Did this parsed schema 
have unresolved &lt;include&gt; &lt;import&gt; or &lt;redefine&gt; directives?"</a></li>
         <li><a href="#pt_stringValidation">Is there a way to determine if a string represents a value that 
a particular simpleType would
consider valid?</a></li>
         <li><a href="#pt_topOfTypes">When I used the method type.getBaseTypeDefinition(), how do I know when I've
reached "the top" -- something like anyType?</a></li>
        <li><a href="#pt_synthesizedTypeOrNot">Because td = resolveTypeDefinition(String nsuri, String name) may return 
an unresolved instance, which is synthesized to hold the namespace and name, if an existing instance cannot be found,
what method can be called to tell whether the resulting type definition is synthesized or 
whether it comes from an existing instance?  
</a></li>


      </ol>
  </li>
  <BR>

</ul>
<table border="0" cellpadding="3" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%">
  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="general">General</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="general_about">What is XML Schema Infoset Model?</a></b><p>The
      <a href="http://www.eclipse.org/xsd" target="_top">XML Schema Infoset Model</a> is 
a reference library for use with any code that examines, creates or modifies XML Schemas (standalone or as part of other artifacts, 
such as XForms or WSDL documents). The library provides an API for manipulating the components of an XML Schema as described by the 
W3C XML Schema specifications, as well as an API for manipulating the DOM-accessible representation of XML Schema as a series of XML 
documents, and for keeping these representations in agreement as schemas are modified. The library includes services to serialize and 
deserialize XML Schema documents, and to do integrity checking of schemas (for example, not using a maximum value for a simpleType 
which is invalid considering the base type of that simpleType). 

      </p>
      <p>
            The model incorporates many of the ideas that several people at IBM had about an excellent API for schemas.
            These ideas were shared with the W3C in February 2002, in a <a href="http://www.research.ibm.com/XML/schema/WD-XML-Schema-Infoset-API-Req.htm">requirements document</a>.
            <br><br><hr>
      </p>
      </li>

    </ol>
    </td>
  </tr>
  <tr>
    <td bgcolor="#777777"><b><font color="#FFFFFF"><a name="install">Download and Install</a></font></b></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="install_howto">How do I install XSD Infoset Model?</a></b><p>
      <a href="http://dev.eclipse.org/viewcvs/indextech.cgi/~checkout~/xsd-home/downloads/dl.html">
      Download</a> the version of XSD that <b>matches</b> your installation of 
      Eclipse.&nbsp; Exit Eclipse, and unzip into the eclipse directory.<br><br><hr>
      </li>
      <li><b><a name="install_classpath">What should my Java CLASSPATH include, in order to use the library?
</a></b><p>
The classpath should be:
<ul>
<li>plugins/org.apache.xerces_4.0.13/xmlParserAPIs.jar;</li>
<li>plugins/org.apache.xerces_4.0.13/xercesImpl.jar;</li>
<li>plugins/org.eclipse.emf.common_1.1.0/runtime/common.jar;</li>
<li>plugins/org.eclipse.emf.ecore_1.1.0/runtime/ecore.jar;</li>
<li>plugins/org.eclipse.xsd_1.1.0/runtime/xsd.jar;</li>
<li>plugins/org.eclipse.xsd_1.1.0/runtime/xsd.resources.jar; (needed at runtime, not compile at time)</li>
<li>yourcode.jar</li>
</ul>
Note that this version requires the use of Xerces-J 2.0.6 (or XML4J 4.0.13).  
Other versions of Xerces-J may not work properly,
although it should continue to work for Xerces-J 2.0.2 (or XML4J 4.0.7).</p>
      <br><br><hr>
      </li>
      <li><b><a name="install_andUse">What steps should I take to install the source code in one Eclipse project,
and to identify another project with my own code as dependent upon and using this library?</a></b><p>
To install the source code in an Eclipse new project, follow these steps :
<ul>
<li>
unzip org.eclipse.xsd.zip  
in &lt;XSD_HOME&gt; directory
</li>
<li>create a new Eclipse project and import into it the content of &lt;XSD_HOME&gt;/plugins/org.eclipse.xsd</li>
<li>set the directory containing the source of the new project to "src" (this directory was imported in the previous step)</li>
<li>add the following locations to the classspath:
  <ul>
     <li>&lt;ECL_HOME&gt;/plugins/org.apache.xerces_4.0.13/xercesImpl.jar;</li>
    <li>&lt;ECL_HOME&gt;/plugins/org.apache.xerces_4.0.13/xmlParserAPIs.jar;</li>
    <li>&lt;XSD_HOME&gt;/plugins/org.eclipse.emf.ecore_1.1.0/runtime/ecore.jar;</li>
    <li>&lt;XSD_HOME&gt;/plugins/org.eclipse.emf.common_1.1.0/runtime/common.jar;</li>
  </ul>
  &lt;ECL_HOME&gt; is the directory where ECL has been installed and &lt;XSD_HOME&gt; is the directory 
where xsd.zip has been unzipped.
</li>
</ul>
<p>
To identify another project with your own code as dependent upon and using this library, follow these steps :
<ul>
<li>make sure that you have created a new project containing the code of this library as indicated previously;</li>
<li>right click on the project folder which should use this library, click on "properties" popup menu item</li>
<li>then, in the java Build Path section, go to the Project pane and check the project you previously created for this library.</li>
</ul>

      </p>
      <br><br><hr>
      <li><b><a name="install_um">Does XSD have a site that I can use with the Eclipse Update Manager?</a></b><p>
No, XSD does not have a site that you can use with the Eclipse Update Manager yet.
      </p>
      <br><br><hr>
      </li>
    </ol>
    </td>
  </tr>
  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="capabilities">Capabilities</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="capabilities_outside">Can this library be used outside of 
the Eclipse environment?</a></b>
<p>
Yes, it can be used within Eclipse and outside of Eclipse.
</p>
<p>
Please note that when running outside Eclipse, 
you need to include on your classpath this additional jar:
<br><br>
&nbsp;&nbsp;plugins/org.eclipse.xsd_1.1.0/runtime/xsd.resources.jar
<br>
</p>
      <br><br><hr>
       </li>
      <li><b><a name="capabilities_versionOfSchema">What version of W3C XML Schema is accepted as input?</a></b>
       <p>
The version specified on May 2, 2001 as a W3C Recommendation. 
This version is described in <a href="http://www.w3.org/TR/2001/REC-xmlschema-0-20010502/">XML Schema Part 0: Primer</a>,
<a href="http://www.w3.org/TR/2001/REC-xmlschema-1-20010502/">XML Schema Part 1: Structures</a>,
and <a href="http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/">XML Schema Part 2: Datatypes</a>.  
       </p>
       <br><br><hr>
      </li>
      <li><b><a name="capabilities_validationOfInstance">Does this library allow me to supply an instance document and have it validated
against the schema?</a></b>
      <p>
No.  Validating parsers, such as <a href="http://xml.apache.org">Xerces</a>, should be used for this function.
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="capabilities_completelyCorrect">Is there a function to inquire "Is this parsed or constructed schema completely correct?"
</a></b>
       <p>
       You can call 
       <a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/XSDConcreteComponent.html#validate()">validate</a> 
       on a schema and check whether there are any 
       <a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/XSDSchema.html#getAllDiagnostics()">diagnostics</a>.
       The diagnostics may include warnings or informational messages, in addition to error messages.
       </p>
       <br><br><hr>
      </li>
    </ol>
    </td>
  </tr>

  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="compatibility">Compatibility</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="compatibility_eclipseVersion">What version(s) of Eclipse does this code work on?</a></b>
      <p>Eclipse 2.1 (and 2.0.x)</p>
      <br><br><hr>
      </li>
      
    </ol>
    </td>
  </tr>
  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="error handling">Error Handling</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="eh_DOMwithBadAttributes">What happens if I pass a DOM which claims to be the XML representation of a Schema, but
there are errors in the attribute values?</a></b>
      <p>
      The schema can be validated to diagnose all such errors. 
      See the <a href="#capabilities_completelyCorrect">capabilities</a>.
      </p>
      <br><br><hr>
      </li>
      
    </ol>
    </td>
  </tr>
  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="how to learn">How To Learn</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="h2l_sampleMethods">Are there sample Java methods that show how to use the API?</a></b>
      <p>
Sample code that includes links back to the javadoc is at:
<a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDPrototypicalSchema.html">XSDPrototypicalSchema.html</a>.
</p>
<p>
Examples of convenience functions also illustrate the use of the bare API.
Those example convenience functions are in the source code.  Info about them is located at
<a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDSchemaBuildingTools.html">XSDSchemaBuildingTools.html</a>
and
<a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDSchemaQueryTools.html">XSDSchemaQueryTools.html</a>.
      </p>
      <br><br><hr>
      </li>
      
    </ol>
    </td>
  </tr>
  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="miscellaneous">Miscellaneous</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="misc_overrideSchemaLocation">Is there a way to have schema documents which
reference other schema documents through &lt;include&gt; &lt;import&gt; or &lt;redefine&gt;
be fetched from locations other than those given in the schemaLocation attribute?</a></b>
      <p>
Yes, you can use a ResourceSet's URIConverter's 
<a href="http://dev.eclipse.org/viewcvs/indextools.cgi/~checkout~/emf-home/http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/emf/ecore/resource/URIConverter.html#getURIMap()">URI map</a> 
to map logical URIs to physical URIs.
You can see an example of that code in XSDProtocotypicalSchema 
<a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDPrototypicalSchema.html#traceLoading(java.lang.String)">traceLoading()</a>.
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="misc_update">When modification are made to a schema document
which was used by another schema document (which has been loaded by this library),
will my code need to explicitly make the corresponding modifications to the using schema document?</a></b>
      <p>
      Yes.
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="misc_prefix">How does the model choose what prefix to use in QNAMEs for a namespace URI in serializing the schema,
when more than one prefix has been associated with that namespace?</a></b>
      <p>
One of the prefixes, or the no-prefix, will be chosen, and used consistently whenever
an XML representation of schema in the form of a DOM is requested.  
This version of the code does not allow you to select which one will be chosen.  
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="misc_equals">Does the o1.equals(o2) method
determine "semantic equivalence" between two schema components?</a></b>
      <p>
This version of the code returns true if o1 and o2 are the same object,
otherwise it returns false.  
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="misc_addToSecondSchema">What happens if I add a schema component to schema2 that I had 
previously added to schema1?</a></b>
      <p>
It is removed from schema1.
This package maintains referential integrity for black diamond relations (in the UML), i.e., containment relations.  
When you add/set to a black diamond relation, the 
object will be effectively removed from the current black diamond relation and is then added/set to the new relation.
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="misc_getAnnotations">ComplexTypes and SimpleTypes only have at most 1 annotation. Why is there XSDTypeDefinition.getAnnotations() in addition to getAnnotation().  
What is getAnnotations() used for?</a></b>
       <p>
There can be at most one annotation in the element information item in the XML Representation of schema which is a 
&lt;simpleType&gt; or &lt;complexType&gt;.
But there can also be an annotation in the &lt;restriction&gt;, &lt;extension&gt;, &lt;list&gt;, &lt;union&gt; (getDerivationAnnotation), 
as well as one in 
the &lt;simpleContent&gt;, &lt;complexContent&gt; (getContentAnnotation) element information items that are part of (children of) the 
simpleType or complexType element information item.  
The list returned by getAnnotations() is the list of all these annotations.
       </p>
       <br><br><hr>
      </li>
      <li><b><a name="misc_getEffectivePROPERTY">If I used one of the getEffectivePROPERTY() methods with a simpleType of the LIST or UNION type,
would any of the facet information from the itemType (in the case of List) or the memberTypes (in
the case of union) be used to adjust or supplement the values returned (as happens
with a simpleType which is atomic and derived by restriction from another type)?</a></b>
       <p>
No.  We follow the concepts of effective properties from the W3C Schema specifications, which
do not cause facets of the memberTypes or item types to be used in the case of UNION or LIST.  
       </p>
       <br><br><hr>
      </li>
      <li><b><a name="misc_getSchemaReturnNull">What can cause some of the resources in a resource set, which correspond
to schema documents referenced by &lt;include&gt; &lt;import&gt; or &lt;redefine&gt;, to return null from
(XSDResourceImpl)resource.getSchema() ?</a></b>
       <p>
This could be seen if you iterate through the resource in a ResourceSet, for example:
<pre>
for (Iterator resources = resourceSet.getResources().iterator(); resources.hasNext();) 
  { Resource resource = (Resource)resources.next(); /* Now use getSchema() */ }
</pre>
If the &lt;include&gt; &lt;import&gt; or &lt;redefine&gt; contained a schemaLocation which has
a relative file path, the library will not resolve it, and this can be a symptom.
</p>
<p>
To get around this problem, have code which is guaranteed to turn the URI into an absolute
URI. For example:
<pre>
 File file = new File(schemaURL);
 if (file.isFile()) {
   schemaURL = URI.createFileURI(file.getCanonicalFile().toString()).toString();
 }
</pre>
       </p>
       <br><br><hr>
      </li>
      <li><b><a name="misc_anySimpleType">How is a declaration of an attribute or element that specifies <strong>anySimpleType</strong>
processed?</a></b>
       <p>
Following the clarifications to the spec, it is permissible to use <strong>anySimpleType</strong> in user schemas.
However, it is an error to extend or restrict this type except in the schema for schemas.
</p>
<p>
Note that an element declaration with an anyType will resolve its type to the complex version of "anyType" and an 
attribute declaration with an anyType will resolve its type to the simple version of "anyType"; 
an element's type may be simple or complex, but an attribute's type must be simple.  
</p>
       <br><br><hr>
      </li>




      <li><b><a name="misc_getElementReturnsNull">When will <strong>getElement()</strong>
return null when used against a component?
</a></b>
      <p>
If the component you have has been synthesized, <strong>getElement()</strong> will return null.
For example, if you have selected the effective pattern facet, the model synthesized
that facet from the zero or more concrete pattern facets.  Another effective facet
that comes from zero to an unlimited number of concrete facets is the enumeration facet.
</p>
<p>
If an <strong>XSDComplexTypeDefinition</strong> exists that extends another one, normally a synthesized
<strong>XSDModelGroup</strong> is produced, containing one or more synthesized 
<strong>XSDParticle</strong> objects;
<strong>getElement()</strong> against those components would also return null.  
      </p>
       <br><br><hr>
      </li>
    </ol>
    </td>
  </tr>
  <tr>
    <td bgcolor="#777777"><font color="#FFFFFF"><b><a name="programming tricks">Programming Tricks</a></b></font></td>
    <td bgcolor="#777777">
    <a href="#toc">
      <font color="#FFFFFF">
      <img src="http://www.eclipse.org/eclipse/faq/up_nav.gif" width="16" height="16" alt="Goto Top" border="0" align="absmiddle">top</font></a></td>
  </tr>
  <tr>
    <td colspan="2">
    <ol>
      <li><b><a name="pt_findByName">To obtain a component of a schema by name, or find out such a component does
not exist in the schema, what sequence of code should be used?</a></b>
      
<p>
The resolveXXXDeclaration and resolveXXXDefinition methods declared in Interface
org.eclipse.xsd.XSDConcreteComponent allow lookup of components that have names.
Note that these methods always return something.
If your schema does not have the component you are looking for, the returned value will be a newly manufactured reference to it. 
</p>
<p>
Here is an example method to return the component or return null if it was not in the schema,
in this case for an Attribute Declaration with a particular name:
</p>
<pre>
/**
return the XSDAttributeDeclaration of a given namespace and name defined in a given schema 
or a schema it includes, redefines or imports
*/
</pre>
<pre>
static XSDAttributeDeclaration 
&nbsp;&nbsp;getAttributeDeclaration(XSDSchema schema, String namespace, String name) {
  
  XSDAttributeDeclaration ret=schema.resolveAttributeDeclaration(namespace,name);
  if (ret.getContainer() == null()) {
    return null;
  } else {
    return ret;
  }
}
</pre>
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_unbounded">How can the attribute maxOccurs="unbounded" be set on a particle?</a></b>
      <p>
Use XSDParticle.setMaxOccurs(-1) to set an unbounded value for maxOccurs.
XSDParticle.getMaxOccurs will return -1 if a particle has an unbounded value for maxOccurs.
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_schemaFromResource">When passed an object of type XSDSchema, what method tells me if it was 
parsed from a Resource?
</a></b>
      <p>
xsdSchema.eResource() returns a Resource, if one is associated, or returns nill.  
The Resource returned has methods such as getURI().
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_serializeTarget">When passed an object of type XSDSchema, what method permits me to alter the Resource 
in which it will be serialized?
</a></b>
      <p>
r = xsdSchema.eResource() returns the Resource associated with an XSDSchema.  You may invoke
r.setURI(uri) if you wish the schema to be saved in the future to another location.
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_remove">How do I remove a component from the Schema?</a></b>
<p>
There is generic support for remove in EMF:
<pre>
  <a href="http://dev.eclipse.org/viewcvs/indextools.cgi/~checkout~/emf-home/http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/emf/ecore/util/EcoreUtil.html#remove(org.eclipse.emf.ecore.EObject)">EcoreUtil.remove</a>
</pre>
The removed component will look like an unresolved reference to any components that still reference it.
</p>
<br><br><hr>
      </li>
      <li><b><a name="pt_nonXSDextension">If I want the library to parse a Schema from a file which does not have the 
extension <strong>.xsd</strong>, 
or serialize a Schema to a file which does not have the extension <strong>.xsd</strong>, 
what do I do?
</a></b>
      <p>
As part of your initialization, for each extension that will contain schemas (shown as foo in this
example), you should call  
<pre>
org.eclipse.emf.resource.Resource.Factory.Registry.<a href="http://dev.eclipse.org/viewcvs/indextools.cgi/~checkout~/emf-home/http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/emf/ecore/resource/Resource.Factory.Registry.html#INSTANCE">INSTANCE</a>.registerExtension("foo", 
  new XSDResourceFactoryImpl());
</pre>
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_containsUnresolved">Is there a function to inquire "Did this parsed schema 
have unresolved &lt;include&gt; &lt;import&gt; or &lt;redefine&gt; directives?"</a></b>
      <p>
You can write code like this:
<pre>
if (xsdSchema.getAllDiagnostics().isEmpty()) { xsdSchema.validate(); } 
if (xsdSchema.getAllDiagnostics().isEmpty()) { /* No Unresolved directives */ }
else { */ Unresolved directives or other problems */ }
</pre>
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_stringValidation">Is there a way to determine if a string represents a value that 
a particular simpleType would
consider valid?</a></b>
      <p>
Yes. The call
<pre>
  yourSimpleTypeDefinition.isValidLiteral("a-particular-string") 
</pre>
will give you the boolean answer.  
      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_topOfTypes">When I used the method type.getBaseTypeDefinition(), how do I know when I've
reached "the top" -- something like anyType?</a></b>
      <p>
For simpleTypes, you would write:
<pre>
yourStopVariable = yourSchema.getSchemaForSchema().resolveSimpleTypeDefinition("anyType"); 
/* as you loop through from one type definition to another, via getBaseTypeDefinition()
   you compare it to yourStopVariable */
</pre>
</p>
<p>
For complexTypes, you would write:
<pre>
yourStopVariable = yourSchema.getSchemaForSchema().resolveComplexTypeDefinition("anyType"); 
/* as you loop through from one type definition to another, via getBaseTypeDefinition()
   you compare it to yourStopVariable */
</pre>
</p>
<p>
If you are not sure if your time is simple or complex, you could write:
<pre>
yourStopVariable = yourSchema.getSchemaForSchema().resolveTypeDefinition("anyType");
</pre>
There are recognizers of the special types in XSDConstants:
<pre>
  <a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDConstants.html#isURType(org.eclipse.xsd.XSDTypeDefinition)">XSDConstants.isURType</a>
  <a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDConstants.html#isAnyType(org.eclipse.xsd.XSDTypeDefinition)">XSDConstants.isAnyType</a>
  <a href="http://download.eclipse.org/technology/xsd/javadoc/org/eclipse/xsd/util/XSDConstants.html#isAnySimple(org.eclipse.xsd.XSDTypeDefinition)">XSDConstants.isAnySimpleType</a>
</pre>

      </p>
      <br><br><hr>
      </li>
      <li><b><a name="pt_synthesizedTypeOrNot"><code>Because td = resolveTypeDefinition(String nsuri, String name)</code> may return 
an unresolved instance, which is synthesized to hold the namespace and name, if an existing instance cannot be found,
what method can be called to tell whether the resulting type definition is synthesized or 
whether it comes from an existing instance?  
</a></b>
       <p>
XSDConcreteComponent.getContainer() will yield null for <code>td</code> if resolveTypeDefinition returned a synthesized type definition. 
       </p>
       <br><br><hr>
      </li>

      
    </ol>
    </td>
  </tr>
</table>



</body>
</html>
